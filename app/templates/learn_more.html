{% extends "base.html" %}
{% block title %}{{ ui.get("nav_learn_label", "Aprende más") }} | {{ ui.get("brand_title", "Agencia Contable") }}{% endblock %}
{% block content %}
<section class="page-hero">
  <div class="container" data-reveal>
    <span class="eyebrow">{{ ui.get("learn_more_eyebrow", "Conocimiento") }}</span>
    <h1>{{ content.title }}</h1>
    <p>{{ content.intro_text }}</p>
  </div>
</section>

{% if posts %}
<section class="post-carousel">
  <div class="container">
    <div class="carousel-card" data-reveal>
      <div class="carousel-header">
        <span class="eyebrow">{{ ui.get("learn_more_slider_eyebrow", "Perspectivas") }}</span>
        <div class="carousel-controls">
          <button class="carousel-btn prev" type="button" aria-label="Anterior">&#8249;</button>
          <button class="carousel-btn next" type="button" aria-label="Siguiente">&#8250;</button>
        </div>
      </div>
      <div class="carousel-track" aria-live="polite">
        {% for post in posts %}
        <article class="carousel-slide" aria-hidden="{% if not loop.first %}true{% else %}false{% endif %}">
          <span class="carousel-topic">{{ post.title }}</span>
          <p class="carousel-quote">{{ post.description }}</p>
          <span class="carousel-meta">{{ ui.get("learn_more_slider_meta", "Agencia Contable") }}</span>
        </article>
        {% endfor %}
      </div>
      <div class="carousel-dots">
        {% for post in posts %}
        <button class="carousel-dot{% if loop.first %} is-active{% endif %}" type="button" aria-label="Ir a {{ post.title }}">
          <span class="carousel-progress" aria-hidden="true"></span>
        </button>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
{% endif %}

<section class="posts">
  <div class="container">
    <div class="post-grid">
      {% for post in posts %}
      <article class="post-card" data-reveal>
        <div class="post-body">
          <h3>{{ post.title }}</h3>
          <p>{{ post.description }}</p>
        </div>
        {% if post.content_type == 'image' and post.content_url %}
        <div class="post-media">
          <img src="{{ post.content_url }}" alt="{{ post.title }}" />
        </div>
        {% elif post.content_type == 'video' and post.content_url %}
        <div class="post-media">
          <video controls src="{{ post.content_url }}"></video>
        </div>
        {% elif post.content_type == 'youtube' and post.content_url %}
        <div class="post-media">
          <iframe
            src="{{ post.content_url }}"
            title="{{ post.title }}"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
        {% elif post.content_type == 'social' and post.content_url %}
        <div class="post-media link-card">
          <a href="{{ post.content_url }}" target="_blank" rel="noreferrer">{{ ui.get("learn_more_link_label", "Ver publicación") }}</a>
        </div>
        {% endif %}
      </article>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}
